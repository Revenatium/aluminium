<!DOCTYPE html>
<html lang="{{ .Lang }}">

   <head>
      {{ partial "head-meta.html" . }}

      {{ block "schema-dot-org" . }}
      <!-- schema.org metadata differs for Nodes and Pages -->
      {{ end }}

      <link rel="canonical" href="{{ .Permalink }}">

      {{ if .Params.meta_title }}
      <title>{{ .Params.meta_title }}</title>
      {{ else }}
      <title>{{ block "title" . }}{{ .Site.Title }}{{ end }}</title>
      {{ end }}

      {{ "<!-- combined, minified CSS -->" | safeHTML }}
      <link href="{{ .Site.BaseURL }}css/build.css" rel="stylesheet">
      <link href="{{ .Site.BaseURL }}css/custom.css" rel="stylesheet">
      {{ template "_internal/google_analytics_async.html" . }}
      {{ partial "head-custom.html" . }}
   </head>

   <body>
      <header>
         {{ partial "header.html" . }}

         {{ partial "navbar.html" . }}
      </header>

      {{if isset .Params "slider" }}
         <div class="jumbotron carousel slide" data-ride="carousel">
            {{ $base := .Params.slider.base }}
            {{ $items := split .Params.slider.pics ","}}
            {{ $len := (len $items) }}
            <div class="carousel-inner">
               {{ range $index, $element := $items }}
               <div class="carousel-item{{ if (eq $index 0) }} active{{ end }}" style="background-image: url({{ print $base "q_auto:low,f_auto,w_1200,h_600,c_fill/" $element }});">
               </div>
               {{ end }}
            </div>

            {{ partial "banner-content.html" . }}

         </div>
      {{ else }}
         <div class="jumbotron {{if isset .Params "featured_image" }}page-banner{{end}}" 
         {{ if isset .Params "featured_image" }}style="background-image: url({{ .Params.featured_image.base}}q_auto:low,f_auto,w_1200,h_600,c_fill/{{ .Params.featured_image.path }});" {{ end }}>
            
            {{ partial "banner-content.html" . }}

         </div>
      {{ end }}

      <div class="container">

         {{ block "main" . }}
         <!-- The part of the page that begins to differ between templates -->
         {{ end }}

      </div>
      {{ partial "footer.html" . }}
      {{ with .Site.Params.bookerURL }}<script src="{{.}}"></script>{{ end }}
      <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
      <script src="{{.Site.BaseURL}}js/jquery.sticky.js"></script>
      <script src="{{.Site.BaseURL}}js/bootstrap.min.js" ></script>
      <script src="{{.Site.BaseURL}}js/build.js" ></script>
      <script type="text/javascript">
      $(document).ready(function($){
          $('.photo-gallery').each(function() {
              $(this).magnificPopup({
                  delegate: 'a',
                  type: 'image',
                  gallery: {
                    enabled:true
                  }
              });
          });
          {{ if ne .Params.hideBooker true }}
          $('.widget-container').sticky({topSpacing:0});
          {{ end }}
          {{if isset .Params "slider" }}
          $('.carousel').carousel({
            interval: 2000
          })
          {{ end }}
      });
      </script>
   </body>
</html>
